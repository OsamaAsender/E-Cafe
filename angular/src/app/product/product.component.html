<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <ngx-spinner
      bdColor="rgba(0, 0, 0, 0.8)"
      size="medium"
      color="#fff"
      type="square-jelly-box"
      [fullScreen]="true"
    >
      <p style="color: white">Loading...</p>
    </ngx-spinner>

    <div>
      <h1 class="text-center mb-0 mt-3">Products</h1>
    </div>
    <hr />
    <button [routerLink]="['create']" class="btn btn-bg-color mb-3">
      Add new product
    </button>
    <!-- <table class="table table-striped mb-5">
      <thead>
        <tr>
          <th class="col-md-3 text-center">Name</th>
          <th class="col-md-3 text-center">Price</th>
          <th class="col-md-3 text-center">Rating</th>
          <th class="col-md-3 text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of products">
          <td class="text-center">{{ product.name }}</td>
          <td class="text-center">{{ product.price | currency}}</td>
          <td class="text-center">
            <star-rating
              [starType]="'svg'"
              [rating]="product.rating"
              [readOnly]="true"
            ></star-rating>
          </td>
          <td class="text-center">
            <a [routerLink]="['edit',product.id]" class="me-2 text-info"
              ><i class="fa-solid fa-pen"></i
            ></a>
            <a [routerLink]="['details', product.id]" class="me-2"
              ><i class="fa-solid fa-circle-info"></i
            ></a>
            <a class="text-danger" title="delete" (click)="deleteProduct(product)">
              <i class="fa-solid fa-trash"></i>
            </a>
          </td>
        </tr>
      </tbody>
    </table> -->

    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let row"> {{row.name}} </td>
      </ng-container>
    
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef> Price </th>
        <td mat-cell *matCellDef="let row"> {{row.price | currency}} </td>
      </ng-container>
    
      <ng-container matColumnDef="rating">
        <th mat-header-cell *matHeaderCellDef> Rating </th>
        <td mat-cell *matCellDef="let row">    <app-star [rating]="row.rating"></app-star> </td>
      </ng-container>
    
      <ng-container matColumnDef="categoryName">
        <th mat-header-cell *matHeaderCellDef> Category </th>
        <td mat-cell *matCellDef="let row"> {{row.categoryName}} </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> Actions </th>
        <td mat-cell *matCellDef="let row">
          <a [routerLink]="['edit',row.id]" class="me-2 text-info"
            ><i class="fa-solid fa-pen"></i
          ></a>
          <a [routerLink]="['details', row.id]" class="me-2"
            ><i class="fa-solid fa-circle-info"></i
          ></a>
          <a class="text-danger" title="delete" (click)="deleteProduct(row)">
            <i class="fa-solid fa-trash"></i>
          </a>
        </td>
      </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator style="margin-top: 1px;" [length]="totalItems" [pageSize]="5" [pageSizeOptions]="[2, 5, 10]" showFirstLastButtons></mat-paginator>
  </body>
</html>
